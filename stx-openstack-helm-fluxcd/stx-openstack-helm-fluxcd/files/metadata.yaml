app_name: app-openstack
app_version: 1.0-1
maintain_user_overrides: true

disabled_charts:
- aodh
- barbican
- ceilometer
- ceph-rgw
- gnocchi
- ironic

upgrades:
  auto_update: true

supported_k8s_version:
  minimum: 1.24.4

dependent_apps:
  - - name: rook-ceph
      version: (2[5-7]\.\d+|[1-12]\d+\.\d+)-\d+
      action: apply
    - name: platform-integ-apps
      version: (2[5-7]\.\d+|[1-12]\d+\.\d+)-\d+
      action: apply

behavior:
  platform_managed_app: yes
  evaluate_reapply:
    triggers:
      - type: unlock
      - type: force-unlock
      - type: runtime-apply-puppet
      - type: host-availability-updated
      - type: kube-upgrade-complete
        filters:
          - availability: services-enabled
      - type: host-delete
        filters:
          - openstack_worker: True
